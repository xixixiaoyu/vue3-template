# 检查提交消息格式
# 要求：类型(范围): 描述
# 例如：feat(ui): 添加新的按钮组件

commit_regex='^(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo ""
    echo "错误：提交消息格式不符合规范"
    echo ""
    echo "允许的提交类型："
    echo "  feat:     新功能"
    echo "  fix:      修复 bug"
    echo "  docs:     文档更新"
    echo "  style:    代码格式化（不影响功能）"
    echo "  refactor: 重构代码"
    echo "  test:     添加或修改测试"
    echo "  chore:    构建过程或辅助工具的变动"
    echo "  perf:     性能优化"
    echo "  ci:       CI 配置文件和脚本的变动"
    echo "  build:    构建系统或外部依赖的变动"
    echo "  revert:   回滚之前的提交"
    echo ""
    echo "正确格式示例："
    echo "  feat(ui): 添加新的按钮组件"
    echo "  fix(auth): 修复登录验证问题"
    echo "  docs: 更新 README 文档"
    echo ""
    exit 1
fi